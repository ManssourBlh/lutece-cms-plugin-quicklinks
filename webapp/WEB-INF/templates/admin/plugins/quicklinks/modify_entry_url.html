<@pageContainer>
    <@pageColumn >
        <@pageHeader title='#i18n{quicklinks.modify_entry_url.adminTitle}' />
		<@tform enctype='multipart/form-data' name='modify_entry_url' action='jsp/admin/plugins/quicklinks/DoModifyEntry.jsp' boxed=true>
		<@input type='hidden' name='entry_id' id='entry_id' value=entry.id />
		<@row>
			<@columns sm=3>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelTitle}' labelFor='title' mandatory=true>
					<@input name='title' id='title' maxlength=255 value=entry.title! />
				</@formGroup>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelUrl}' labelFor='url' mandatory=true>
					<@inputGroup>
						<@inputGroupItem>
							<@icon style='link' />
						</@inputGroupItem>
						<@input type='url' name='url' id='url' maxlength=255 value=entry.url! />
					</@inputGroup>
				</@formGroup>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelDescription}' labelFor='description'>
					<@input name='description' id='description' maxlength=255 value=entry.description! />
				</@formGroup>
			</@columns>
			<@columns sm=3>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelImage}' labelFor='image'>
					<@input type='file' name='image' id='image' />
					<@input type='hidden' name='update_image' id='update_image' value='true' />
				</@formGroup>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelDisplayProperties}' labelFor='display_properties' mandatory=true>
				<#list display_properties_list as item>
					<#assign isTargetChecked='false' />
					<#if item.code=entry.entryUrlDisplayProperties.value?string><#assign isTargetChecked='true' /></#if> 
					<@radioButton name='display_properties' id='display_properties_${item.code}' labelKey='#i18n{${item.name}}' orientation='' value='${item.code}' checked=isTargetChecked?boolean />
				</#list>
				</@formGroup>
				<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelLinkProperties}' labelFor='link_properties' mandatory=true>
				<#list link_properties_list as item>
					<#assign isTargetChecked='false' />
					<#if item.code=entry.entryUrlLinkProperties.value?string><#assign isTargetChecked='true' /></#if> 
					<@radioButton name='link_properties' id='link_properties_${item.code}' labelKey='#i18n{${item.name}}' orientation='' value='${item.code}' checked=isTargetChecked?boolean />
				</#list>
				</@formGroup>
			</@columns>
			<@columns sm=2>
				<@fieldSet legend='#i18n{quicklinks.modify_entry_url.labelTarget}'>
					<#assign isBlank = false />
					<#assign isSelf = false />
					<#assign isTop = false />
					<#assign isParent = false />
					<#assign isOther = true />
					<#switch entry.target>
						<#case '_blank'>
							<#assign isBlank = true />
							<#assign isOther = false />
							<#break>
						<#case '_self'>
							<#assign isSelf = true />
							<#assign isOther = false />
							<#break>
						<#case '_parent'>
							<#assign isParent = true />
							<#assign isOther = false />
							<#break>
						<#case '_top'>
							<#assign isTop = true />
							<#assign isOther = false />
							<#break>
					</#switch>
					<@radioButton name='target' id='blank' class='form-radio-target' labelKey='#i18n{quicklinks.modify_entry_url.target.blank}' orientation='' value='_blank' checked=isBlank />
					<@radioButton name='target' id='self' class='form-radio-target' labelKey='#i18n{quicklinks.modify_entry_url.target.self}' orientation='' value='_self' checked=isSelf />
					<@radioButton name='target' id='parent' class='form-radio-target' labelKey='#i18n{quicklinks.modify_entry_url.target.parent}' orientation='' value='_parent' checked=isParent />
					<@radioButton name='target' id='top' class='form-radio-target' labelKey='#i18n{quicklinks.modify_entry_url.target.top}' orientation='' value='_top' checked=isTop />
					<@radioButton name='target' id='other' class='form-radio-target' labelKey='#i18n{quicklinks.modify_entry_url.target.other}' orientation='' value='' checked=isOther />
					<#if isOther><#assign targetVal = entry.target /></#if>
					<@formGroup labelKey='#i18n{quicklinks.modify_entry_url.labelTarget}' hideLabel=['all']>
						<@input name='target' id='target_framename' placeholder='#i18n{quicklinks.modify_entry_url.labelTarget}' maxlength=255 value=targetVal! />
					</@formGroup>
				</@fieldSet>
			</@columns>
			<@columns sm=3 class='d-flex align-items-center justify-content-around'>
				<@formGroup>
					<@button color='primary' type='submit' buttonIcon='check' title='#i18n{quicklinks.modify_entry_url.buttonLabelModify}' />
					<@aButton color='default' href="jsp/admin/plugins/quicklinks/ModifyQuicklinks.jsp?&quicklinks_id=${entry.idQuicklinks}" buttonIcon='x' title='#i18n{portal.admin.message.buttonCancel}' />
				</@formGroup>
			</@columns>
			</@row>
		</@tform>
	</@pageColumn>
</@pageContainer>
<script>
document.addEventListener( "DOMContentLoaded", function(){
	const tgFrame = document.getElementById('target_framename'), radioList = document.querySelectorAll('.form-radio-target')
	if( tgFrame.value =="" ){
		tgFrame.setAttribute( 'disabled', 'disabled' )
	}
	
	radioList.forEach( element => {
		element.addEventListener( 'click', ( event ) => {
			if( event.currentTarget.getAttribute('id' ) === 'other' ){
				tgFrame.removeAttribute( 'disabled' )
			} else {
				tgFrame.value='';
				tgFrame.setAttribute( 'disabled', 'disabled' )
			}
		})
	})
});
</script>